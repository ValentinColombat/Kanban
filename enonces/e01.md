# üß™ Challenge E01 - Inscription utilisateur

## Objectif

Mettre en place un syst√®me d'inscription (`register` aka `signup`) dans l'application backend existante.

## Contexte

Ton application permet d√©j√† de g√©rer certaines entit√©s. On souhaite d√©sormais permettre √† des utilisateurs de s'inscrire via une nouvelle route `/auth/register`.

## Instructions

### 1. Mod√®le

- Cr√©er une nouvelle entit√© `User` dans les `models`.
- Le mod√®le doit comporter au moins un `username` (unique) et un `password`.
- Modifier l'√©chantillonage (seeding) pour cr√©er un ou deux utilisateurs et ainsi tester le mod√®le.
- Utiliser un mot de passe en clair dans le seeding ou un [mot de passe d√©j√† hach√©](https://www.coderstool.com/argon2-hash-generator).

### 2. Routeur

- Cr√©er un routeur d√©di√© `auth.router.js` et y ajouter la route `POST /auth/register`.
- Cr√©er un controlleur d√©di√© `auth.controller.js` et y ajouter une m√©thode `registerUser` √† brancher au routeur
- Brancher le routeur d'auth sur le routeur principal et tester la route !

### 3. Contr√¥leur

Impl√©mente la logique d'inscription dans un contr√¥leur :

- Valider les entr√©es utilisateurs √† l'aide d'une librairie de validation (ex. Joi). Il est possible d'externaliser via un middleware.
- V√©rifier que le mot de passe fourni corresponde √† sa confirmation
- V√©rifier que le pseudo utilisateur n'est pas d√©j√† pris, autrement r√©pondre avec une r√©ponse `4XX` appropri√©e.
- Hacher le mot de passe de l'utilisateur √† l'aide d'une librairie ([argon2](https://www.npmjs.com/package/argon2) par exemple)
- Enregistrer l'utilisater en base de donn√©es
- Renvoyer les donn√©es de l'utilisateur cr√©√©, sans son mot de passe.

### 4. Tests

- V√©rifie que l'inscription fonctionne bien via un client HTTP.
- Essaie de t'inscrire via l‚Äôinterface c√¥t√© frontend (si disponible).
- V√©rifie que le mot de passe n‚Äôappara√Æt pas en clair dans la base de donn√©es.

## Conseils

- Ne n√©glige pas la gestion des erreurs.
- V√©rifie bien que ton mod√®le est import√© dans le fichier d'index des mod√®les.
- Pense √† relancer les commandes de migration/seed si n√©cessaire :

```sh
cd api && npm run db:reset

ou

npm run db:reset --prefix api
```

## Crit√®res de validation

‚úÖ La route `/auth/register` existe et fonctionne.

‚úÖ Les champs sont valid√©s.

‚úÖ Le mot de passe est correctement hash√© avant insertion.

‚úÖ Les doublons de username sont g√©r√©s.

‚úÖ Le code est structur√© (mod√®le, contr√¥leur, middleware, routes).
